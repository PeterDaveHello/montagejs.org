montageDefine("95ef556","test/integration/test-delayed-streams-and-buffers-and-strings",{dependencies:["../common","fs"],factory:function(e,t,n){var r=e("../common"),i=r.assert,s=r.CombinedStream,o=e("fs"),u=r.dir.fixture+"/file1.txt",a=new Buffer("Bacon is delicious"),f=r.dir.fixture+"/file2.txt",l="The â‚¬ kicks the $'s ass!",c=o.readFileSync(u)+a+o.readFileSync(f)+l,h;(function(){var t=s.create();t.append(o.createReadStream(u)),t.append(a),t.append(o.createReadStream(f)),t.append(function(e){e(l)});var n=r.dir.tmp+"/combined-file1-buffer-file2-string.txt",i=o.createWriteStream(n);t.pipe(i),i.on("close",function(){h=o.readFileSync(n,"utf8")})})(),process.on("exit",function(){i.strictEqual(h,c)})}})