montageDefine("edd53dd","iterator",{dependencies:["./shim-object","./generic-collection"],factory:function(t,e,n){"use strict";function a(t){if(!(this instanceof a))return new a(t);if(Array.isArray(t)||"string"==typeof t)return a.iterate(t);if(t=s(t),t instanceof a)return t;if(t.next)this.next=function(){return t.next()};else if(t.iterate){var e=t.iterate();this.next=function(){return e.next()}}else{if("[object Function]"!==s.prototype.toString.call(t))throw new TypeError("Can't iterate "+t);this.next=t}}n.exports=a;var s=t("./shim-object"),i=t("./generic-collection");a.prototype.forEach=i.prototype.forEach,a.prototype.map=i.prototype.map,a.prototype.filter=i.prototype.filter,a.prototype.every=i.prototype.every,a.prototype.some=i.prototype.some,a.prototype.any=i.prototype.any,a.prototype.all=i.prototype.all,a.prototype.min=i.prototype.min,a.prototype.max=i.prototype.max,a.prototype.sum=i.prototype.sum,a.prototype.average=i.prototype.average,a.prototype.flatten=i.prototype.flatten,a.prototype.zip=i.prototype.zip,a.prototype.enumerate=i.prototype.enumerate,a.prototype.sorted=i.prototype.sorted,a.prototype.group=i.prototype.group,a.prototype.reversed=i.prototype.reversed,a.prototype.toArray=i.prototype.toArray,a.prototype.toObject=i.prototype.toObject,a.prototype.iterator=i.prototype.iterator,a.prototype.constructClone=function(t){var e=[];return e.addEach(t),e},a.prototype.mapIterator=function(t){var e=a(this),n=arguments[1],i=0;if("[object Function]"!=s.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){return t.call(n,e.next(),i++,e)})},a.prototype.filterIterator=function(t){var e=a(this),n=arguments[1],i=0;if("[object Function]"!=s.prototype.toString.call(t))throw new TypeError;return new e.constructor(function(){for(var a;;)if(a=e.next(),t.call(n,a,i++,e))return a})},a.prototype.reduce=function(t){var e,n=a(this),i=arguments[1],r=arguments[2],o=0;if("[object Function]"!=s.prototype.toString.call(t))throw new TypeError;try{e=n.next(),i=arguments.length>1?t.call(r,i,e,o,n):e,o++}catch(l){if(isStopIteration(l)){if(arguments.length>1)return arguments[1];throw TypeError("cannot reduce a value from an empty iterator with no initial value")}throw l}try{for(;;)e=n.next(),i=t.call(r,i,e,o,n),o++}catch(l){if(isStopIteration(l))return i;throw l}},a.prototype.concat=function(){return a.concat(Array.prototype.concat.apply(this,arguments))},a.prototype.dropWhile=function(t){var e,n=a(this),i=arguments[1],r=!1;if("[object Function]"!=s.prototype.toString.call(t))throw new TypeError;return n.forEach(function(a,s){if(!t.call(i,a,s,n))throw r=!0,e=a,StopIteration}),r?n.constructor([e]).concat(n):n.constructor([])},a.prototype.takeWhile=function(t){var e=a(this),n=arguments[1];if("[object Function]"!=s.prototype.toString.call(t))throw new TypeError;return e.mapIterator(function(a,s){if(!t.call(n,a,s,e))throw StopIteration;return a})},a.prototype.zipIterator=function(){return a.unzip(Array.prototype.concat.apply(this,arguments))},a.prototype.enumerateIterator=function(t){return a.count(t).zipIterator(this)},a.iterate=function(t){var e;return e=0,new a(function(){if("object"==typeof t)for(;!(e in t);){if(e>=t.length)throw StopIteration;e+=1}else if(e>=t.length)throw StopIteration;var n=t[e];return e+=1,n})},a.cycle=function(t,e){2>arguments.length&&(e=1/0);var n=function(){throw StopIteration};return new a(function(){var s;try{return n()}catch(i){if(isStopIteration(i)){if(0>=e)throw i;return e--,s=a.iterate(t),n=s.next.bind(s),n()}throw i}})},a.concat=function(t){t=a(t);var e=function(){throw StopIteration};return new a(function(){var n;try{return e()}catch(s){if(isStopIteration(s))return n=a(t.next()),e=n.next.bind(n),e();throw s}})},a.unzip=function(t){return t=a(t).map(a),0===t.length?new a([]):new a(function(){var e,n=t.map(function(t){try{return t.next()}catch(n){if(!isStopIteration(n))throw n;e=!0}});if(e)throw StopIteration;return n})},a.zip=function(){return a.unzip(Array.prototype.slice.call(arguments))},a.chain=function(){return a.concat(Array.prototype.slice.call(arguments))},a.range=function(t,e,n){return 3>arguments.length&&(n=1),2>arguments.length&&(e=t,t=0),t=t||0,n=n||1,new a(function(){if(t>=e)throw StopIteration;var a=t;return t+=n,a})},a.count=function(t,e){return a.range(t,1/0,e)},a.repeat=function(t,e){return new a.range(e).mapIterator(function(){return t})},"undefined"==typeof isStopIteration&&(global.isStopIteration=function(t){return"[object StopIteration]"===s.prototype.toString.call(t)}),"undefined"==typeof StopIteration&&(global.StopIteration={},s.prototype.toString=function(t){return function(){return this===global.StopIteration||this instanceof global.ReturnValue?"[object StopIteration]":t.call(this,arguments)}}(s.prototype.toString)),r===void 0&&(global.ReturnValue=function r(t){return this.message="Iteration stopped with "+t,Error.captureStackTrace&&Error.captureStackTrace(this,r),this instanceof global.ReturnValue?(this.value=t,void 0):new global.ReturnValue(t)},r.prototype=Error.prototype)}});