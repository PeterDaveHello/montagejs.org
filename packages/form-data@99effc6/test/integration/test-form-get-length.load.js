montageDefine("99effc6","test/integration/test-form-get-length",{dependencies:["../common","fake","fs"],factory:function(e,t,n){var r=e("../common"),i=r.assert,s=e(r.dir.lib+"/form_data"),o=e("fake").create(),u=e("fs");(function(){var t=new s,n=o.callback(arguments.callee.name+"-getLength"),r=o.expectAnytime(n,[null,0]).calls;t.getLength(n),i.strictEqual(r.length,0)})(),function(){var t="my_field",n="May the â‚¬ be with you",r=new s;r.append(t,n);var i=o.callback(arguments.callee.name+"-getLength"),u=r._overheadLength+Buffer.byteLength(n)+r._lastBoundary().length;o.expectAnytime(i,[null,u]),r.getLength(i)}(),function(){var t="my_field",n=new Buffer(23),r=new s;r.append(t,n);var i=o.callback(arguments.callee.name+"-getLength"),u=r._overheadLength+n.length+r._lastBoundary().length;o.expectAnytime(i,[null,u]),r.getLength(i)}(),function(){var t=[{name:"my_field",value:"Test 123"},{name:"my_image",value:u.createReadStream(r.dir.fixture+"/unicycle.jpg")},{name:"my_buffer",value:new Buffer("123")},{name:"my_txt",value:u.createReadStream(r.dir.fixture+"/bacon.txt")}],n=new s,i=0;t.forEach(function(e){n.append(e.name,e.value);if(e.value.path){var t=u.statSync(e.value.path);i+=t.size}else i+=e.value.length}),i+=n._overheadLength+n._lastBoundary().length;var a=o.callback(arguments.callee.name+"-getLength");o.expectAnytime(a,[null,i]),n.getLength(a)}()}})