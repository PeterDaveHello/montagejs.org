montageDefine("fa3ad4d","listen/array-changes",{dependencies:["../shim","../list","../weak-map","./property-changes","./range-changes","./map-changes"],factory:function(e){function t(e){for(var t in e)Object.defineProperty(Array.prototype,t,{value:e[t],writable:!0,configurable:!0,enumerable:!1})}e("../shim"),e("../list"),e("../weak-map");var n,a=e("./property-changes"),s=e("./range-changes"),i=e("./map-changes"),r=Array.prototype.splice,o=Array.prototype.slice,l=Array.prototype.reverse,c=Array.prototype.sort,p={}.__proto__===Object.prototype;n=p?function(){this.__proto__=h}:function(){Object.defineProperties(this,u)},Object.defineProperty(Array.prototype,"makeObservable",{value:n,writable:!0,configurable:!0,enumerable:!1}),t(a.prototype),t(s.prototype),t(i.prototype);var u={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){this.dispatchBeforeRangeChange(this,this,0);for(var e=0;this.length>e;e++)a.dispatchBeforeOwnPropertyChange(this,e,this[e]),this.dispatchBeforeMapChange(e,this[e]);l.call(this);for(var e=0;this.length>e;e++)a.dispatchOwnPropertyChange(this,e,this[e]),this.dispatchMapChange(e,this[e]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},sort:{value:function(){this.dispatchBeforeRangeChange(this,this,0);for(var e=0;this.length>e;e++)a.dispatchBeforeOwnPropertyChange(this,e,this[e]),this.dispatchBeforeMapChange(e,this[e]);c.apply(this,arguments);for(var e=0;this.length>e;e++)a.dispatchOwnPropertyChange(this,e,this[e]),this.dispatchMapChange(e,this[e]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},splice:{value:function(e,t){var n=o.call(this,e,e+t),s=o.call(arguments,2);if(!n.length&&!s.length)return s;var i=s.length-n.length,l=this.length,c=Math.max(this.length+i,e+s.length),p=Math.max(l,c);if(i&&a.dispatchBeforeOwnPropertyChange(this,"length",this.length),this.dispatchBeforeRangeChange(s,n,e),0===i)for(var u=e;e+s.length>u;u++)a.dispatchBeforeOwnPropertyChange(this,u,this[u]),this.dispatchBeforeMapChange(u,this[u]);else if(a.hasOwnPropertyChangeDescriptor(this))for(var u=e;p>u;u++)a.dispatchBeforeOwnPropertyChange(this,u,this[u]),this.dispatchBeforeMapChange(u,this[u]);e>l&&(this.length=e);var h=r.apply(this,arguments);if(0===i)for(var u=e;e+s.length>u;u++)a.dispatchOwnPropertyChange(this,u,this[u]),this.dispatchMapChange(u,this[u]);else if(a.hasOwnPropertyChangeDescriptor(this))for(var u=e;p>u;u++)a.dispatchOwnPropertyChange(this,u,this[u]),this.dispatchMapChange(u,this[u]);return this.dispatchRangeChange(s,n,e),i&&a.dispatchOwnPropertyChange(this,"length",this.length),h},writable:!0,configurable:!0},set:{value:function(e,t){return this.splice(e,1,t),this},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){return this.length?this.splice(this.length-1,1)[0]:void 0},writable:!0,configurable:!0},push:{value:function(e){if(1===arguments.length)return this.splice(this.length,0,e);var t=o.call(arguments);return this.swap(this.length,0,t)},writable:!0,configurable:!0},unshift:{value:function(e){if(1===arguments.length)return this.splice(0,0,e);var t=o.call(arguments);return this.swap(0,0,t)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},h=Object.create(Array.prototype,u)}});