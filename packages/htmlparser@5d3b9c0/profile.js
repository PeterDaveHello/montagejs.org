function getMillisecs(){return(new Date).getTime()}function timeExecutions(e,t){var n=getMillisecs();while(e--)t();return getMillisecs()-n}var sys=require("sys"),fs=require("fs"),http=require("http"),htmlparser=require("./lib/htmlparser"),testNHP=!0,testLXJS=!1,testIterations=100,testHost="localhost",testPort=80,testPath="/~chris/feed.xml",html="";http.createClient(testPort,testHost).request("GET",testPath,{host:testHost}).addListener("response",function(e){e.statusCode=="200"?(e.setEncoding("utf8"),e.addListener("data",function(e){html+=e}).addListener("end",function(){var e=testNHP?timeExecutions(testIterations,function(){var e=new htmlparser.DefaultHandler(function(e,t){e&&sys.debug("Error: "+e)}),t=new htmlparser.Parser(e,{includeLocation:!0});t.parseComplete(html)}):0,t=testLXJS?timeExecutions(testIterations,function(){var e=libxml.parseHtmlString(html)}):0;testNHP&&sys.debug("NodeHtmlParser: "+e),testLXJS&&sys.debug("LibXmlJs: "+t),testNHP&&testLXJS&&sys.debug("Difference: "+(e-t)/t*100)})):sys.debug("Error: got response status "+e.statusCode)}).end()