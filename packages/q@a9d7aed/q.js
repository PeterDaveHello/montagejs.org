(function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()})(function(){"use strict";function e(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===bt(e)||e instanceof ot}function a(e,t){if(st&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(wt)){for(var n=[],a=t;a;a=a.source)a.stack&&n.unshift(a.stack);n.unshift(e.stack);var i=n.join("\n"+wt+"\n");e.stack=s(i)}}function s(e){for(var t=e.split("\n"),n=[],a=0;t.length>a;++a){var s=t[a];o(s)||i(s)||!s||n.push(s)}return n.join("\n")}function i(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function r(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var a=/.*@(.+):(\d+)$/.exec(e);return a?[a[1],Number(a[2])]:void 0}function o(e){var t=r(e);if(!t)return!1;var n=t[0],a=t[1];return n===rt&&a>=lt&&Ct>=a}function l(){if(st)try{throw Error()}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],a=r(n);if(!a)return;return rt=a[0],a[1]}}function c(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",Error("").stack),e.apply(e,arguments)}}function p(e){return M(e)}function u(){function e(e){t=e,i.source=e,ht(n,function(t,n){pt(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,a=void 0}var t,n=[],a=[],s=gt(u.prototype),i=gt(d.prototype);if(i.promiseDispatch=function(e,s,i){var r=ut(arguments);n?(n.push(r),"when"===s&&i[1]&&a.push(i[1])):pt(function(){t.promiseDispatch.apply(t,r)})},i.valueOf=c(function(){if(n)return i;var e=m(t);return g(e)&&(t=e),e},"valueOf","inspect"),i.inspect=function(){return t?t.inspect():{state:"pending"}},p.longStackSupport&&st)try{throw Error()}catch(r){i.stack=r.stack.substring(r.stack.indexOf("\n")+1)}return s.promise=i,s.resolve=function(n){t||e(M(n))},s.fulfill=function(n){t||e(C(n))},s.reject=function(n){t||e(j(n))},s.notify=function(e){t||ht(a,function(t,n){pt(function(){n(e)})},void 0)},s}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=u();return R(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function d(e,t,n){void 0===t&&(t=function(e){return j(Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var a=gt(d.prototype);if(a.promiseDispatch=function(n,s,i){var r;try{r=e[s]?e[s].apply(a,i):t.call(a,s,i)}catch(o){r=j(o)}n&&n(r)},a.inspect=n,n){var s=n();"rejected"===s.state&&(a.exception=s.reason),a.valueOf=c(function(){var e=n();return"pending"===e.state||"rejected"===e.state?a:e.value})}return a}function m(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return t(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function f(e){return t(e)&&"function"==typeof e.then}function v(e){return g(e)&&"pending"===e.inspect().state}function b(e){return!g(e)||"fulfilled"===e.inspect().state}function y(e){return g(e)&&"rejected"===e.inspect().state}function w(){Et||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",_t),Et=!0}function _(){for(var e=0;_t.length>e;e++){var t=_t[e];t&&t.stack!==void 0?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}function x(){_t.length=0,xt.length=0,Et=!1,Tt||(Tt=!0,"undefined"!=typeof process&&process.on&&process.on("exit",_))}function E(e,t){Tt&&(xt.push(e),_t.push(t),w())}function T(e){if(Tt){var t=dt(xt,e);-1!==t&&(xt.splice(t,1),_t.splice(t,1))}}function j(e){var t=d({when:function(t){return t&&T(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return E(t,e),t}function C(e){return d({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return vt(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function M(e){return g(e)?e:f(e)?k(e):C(e)}function k(e){var t=u();return pt(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function P(e){return d({isDef:function(){}},function(t,n){return B(e,t,n)},function(){return M(e).inspect()})}function S(e,t,n,a){return p(e).then(t,n,a)}function D(e,t,n){return S(e,function(e){return U(e).then(function(e){return t.apply(void 0,e)},n)},n)}function O(e){return function(){function t(e,t){var r;if(yt){try{r=a[e](t)}catch(o){return j(o)}return r.done?r.value:S(r.value,s,i)}try{r=a[e](t)}catch(o){return n(o)?o.value:j(o)}return S(r,s,i)}var a=e.apply(this,arguments),s=t.bind(t,"send"),i=t.bind(t,"throw");return s()}}function I(e){p.done(p.async(e)())}function A(e){throw new ot(e)}function L(e){return function(){return D([this,U(arguments)],function(t,n){return e.apply(t,n)})}}function B(e,t,n){var a=u();return pt(function(){M(e).promiseDispatch(a.resolve,t,n)}),a.promise}function z(e){return function(t){var n=ut(arguments,1);return B(t,e,n)}}function N(e,t){var n=ut(arguments,2);return jt(e,t,n)}function q(e,t){return B(e,"apply",[void 0,t])}function R(e){var t=ut(arguments,1);return q(e,t)}function F(e){var t=ut(arguments,1);return function(){var n=t.concat(ut(arguments));return B(e,"apply",[this,n])}}function U(e){return S(e,function(e){var t=0,n=u();return ht(e,function(a,s,i){var r;g(s)&&"fulfilled"===(r=s.inspect()).state?e[i]=r.value:(++t,S(s,function(a){e[i]=a,0===--t&&n.resolve(e)},n.reject))},void 0),0===t&&n.resolve(e),n.promise})}function W(e){return S(e,function(e){return e=mt(e,M),S(U(mt(e,function(e){return S(e,ct,ct)})),function(){return e})})}function H(e){return S(e,function(e){return U(mt(e,function(t,n){return S(t,function(t){return e[n]={state:"fulfilled",value:t},e[n]},function(t){return e[n]={state:"rejected",reason:t},e[n]})})).thenResolve(e)})}function Y(e,t){return S(e,void 0,t)}function K(e,t){return S(e,void 0,void 0,t)}function G(e,t){return S(e,function(e){return S(t(),function(){return e})},function(e){return S(t(),function(){return j(e)})})}function V(e,t,n,s){var i=function(t){pt(function(){if(a(t,e),!p.onerror)throw t;p.onerror(t)})},r=t||n||s?S(e,t,n,s):e;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i)),Y(r,i)}function X(e,t,n){var a=u(),s=setTimeout(function(){a.reject(Error(n||"Timed out after "+t+" ms"))},t);return S(e,function(e){clearTimeout(s),a.resolve(e)},function(e){clearTimeout(s),a.reject(e)},a.notify),a.promise}function J(e,t){void 0===t&&(t=e,e=void 0);var n=u();return S(e,void 0,void 0,n.notify),setTimeout(function(){n.resolve(e)},t),n.promise}function $(e,t){var n=ut(t),a=u();return n.push(a.makeNodeResolver()),q(e,n).fail(a.reject),a.promise}function Z(e){var t=ut(arguments,1),n=u();return t.push(n.makeNodeResolver()),q(e,t).fail(n.reject),n.promise}function Q(e){var t=ut(arguments,1);return function(){var n=t.concat(ut(arguments)),a=u();return n.push(a.makeNodeResolver()),q(e,n).fail(a.reject),a.promise}}function et(e,t){var n=ut(arguments,2);return function(){function a(){return e.apply(t,arguments)}var s=n.concat(ut(arguments)),i=u();return s.push(i.makeNodeResolver()),q(a,s).fail(i.reject),i.promise}}function tt(e,t,n){var a=ut(n||[]),s=u();return a.push(s.makeNodeResolver()),jt(e,t,a).fail(s.reject),s.promise}function nt(e,t){var n=ut(arguments,2),a=u();return n.push(a.makeNodeResolver()),jt(e,t,n).fail(a.reject),a.promise}function at(e,t){return t?(e.then(function(e){pt(function(){t(null,e)})},function(e){pt(function(){t(e)})}),void 0):e}var st=!1;try{throw Error()}catch(it){st=!!it.stack}var rt,ot,lt=l(),ct=function(){},pt=function(){function e(){for(;t.next;){t=t.next;var n=t.task;t.task=void 0;var s=t.domain;s&&(t.domain=void 0,s.enter());try{n()}catch(r){if(i)throw s&&s.exit(),setTimeout(e,0),s&&s.enter(),r;setTimeout(function(){throw r},0)}s&&s.exit()}a=!1}var t={task:void 0,next:null},n=t,a=!1,s=void 0,i=!1;if(pt=function(e){n=n.next={task:e,domain:i&&process.domain,next:null},a||(a=!0,s())},"undefined"!=typeof process&&process.nextTick)i=!0,s=function(){process.nextTick(e)};else if("function"==typeof setImmediate)s="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var r=new MessageChannel;r.port1.onmessage=e,s=function(){r.port2.postMessage(0)}}else s=function(){setTimeout(e,0)};return pt}(),ut=e(Array.prototype.slice),ht=e(Array.prototype.reduce||function(e,t){var n=0,a=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=a)throw new TypeError}for(;a>n;n++)n in this&&(t=e(t,this[n],n));return t}),dt=e(Array.prototype.indexOf||function(e){for(var t=0;this.length>t;t++)if(this[t]===e)return t;return-1}),mt=e(Array.prototype.map||function(e,t){var n=this,a=[];return ht(n,function(s,i,r){a.push(e.call(t,i,r,n))},void 0),a}),gt=Object.create||function(e){function t(){}return t.prototype=e,new t},ft=e(Object.prototype.hasOwnProperty),vt=Object.keys||function(e){var t=[];for(var n in e)ft(e,n)&&t.push(n);return t},bt=e(Object.prototype.toString);ot="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var yt;try{Function("(function* (){ yield 1; })"),yt=!0}catch(it){yt=!1}var wt="From previous event:";p.nextTick=pt,p.longStackSupport=!1,p.defer=u,u.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(ut(arguments,1)):e.resolve(n)}},p.promise=h,p.makePromise=d,d.prototype.then=function(e,t,n){function s(t){try{return"function"==typeof e?e(t):t}catch(n){return j(n)}}function i(e){if("function"==typeof t){a(e,o);try{return t(e)}catch(n){return j(n)}}return j(e)}function r(e){return"function"==typeof n?n(e):e}var o=this,l=u(),c=!1;return pt(function(){o.promiseDispatch(function(e){c||(c=!0,l.resolve(s(e)))},"when",[function(e){c||(c=!0,l.resolve(i(e)))}])}),o.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=r(e)}catch(a){if(n=!0,!p.onerror)throw a;p.onerror(a)}n||l.notify(t)}]),l.promise},d.prototype.thenResolve=function(e){return S(this,function(){return e})},d.prototype.thenReject=function(e){return S(this,function(){throw e})},ht(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","mapply","invoke","mcall","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","nmapply","ninvoke","nmcall","nodeify"],function(e,t){d.prototype[t]=function(){return p[t].apply(p,[this].concat(ut(arguments)))}},void 0),d.prototype.toSource=function(){return""+this},d.prototype.toString=function(){return"[object Promise]"},p.nearer=m,p.isPromise=g,p.isPromiseAlike=f,p.isPending=v,p.isFulfilled=b,p.isRejected=y;var _t=[],xt=[],Et=!1,Tt=!0;p.resetUnhandledRejections=x,p.getUnhandledReasons=function(){return _t.slice()},p.stopUnhandledRejectionTracking=function(){x(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",_),Tt=!1},x(),p.reject=j,p.fulfill=C,p.resolve=M,p.master=P,p.when=S,p.spread=D,p.async=O,p.spawn=I,p["return"]=A,p.promised=L,p.dispatch=B,p.dispatcher=z,p.get=z("get"),p.set=z("set"),p["delete"]=p.del=z("delete");var jt=p.post=z("post");p.mapply=jt,p.send=N,p.invoke=N,p.mcall=N,p.fapply=q,p["try"]=R,p.fcall=R,p.fbind=F,p.keys=z("keys"),p.all=U,p.allResolved=c(W,"allResolved","allSettled"),p.allSettled=H,p["catch"]=p.fail=Y,p.progress=K,p["finally"]=p.fin=G,p.done=V,p.timeout=X,p.delay=J,p.nfapply=$,p.nfcall=Z,p.nfbind=Q,p.denodeify=p.nfbind,p.nbind=et,p.npost=tt,p.nmapply=tt,p.nsend=nt,p.ninvoke=p.nsend,p.nmcall=p.nsend,p.nodeify=at;var Ct=l();return p});