montageDefine("6b26a70","tests/test-proxy",{dependencies:["./server","events","stream","assert","fs","../index","path","util"],factory:function(e,t,n){var r=e("./server"),i=e("events"),s=e("stream"),o=e("assert"),u=e("fs"),a=e("../index"),f=e("path"),l=e("util"),c=6768,h=!1,p="google.com",d=r.createServer(c);d.listen(c,function(){d.on("http://google.com/",function(e,t){h=!0,o.equal(e.headers.host,p),t.writeHeader(200),t.end()}),a({url:"http://"+p,proxy:"http://localhost:"+c},function(e,t,n){d.close()})}),process.on("exit",function(){o.ok(h,"the request must be made to the proxy server")})}})