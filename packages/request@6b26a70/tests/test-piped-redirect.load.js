montageDefine("6b26a70","tests/test-piped-redirect",{dependencies:["http","assert","../index"],factory:function(e,t,n){var r=e("http"),i=e("assert"),s=e("../index"),o=8968,u=8969,a=r.createServer(function(e,t){e.url=="/original"?(t.writeHeader(302,{location:"/redirected"}),t.end()):e.url=="/redirected"&&(t.writeHeader(200,{"content-type":"text/plain"}),t.write("OK"),t.end())}).listen(o),f=r.createServer(function(e,t){var n=s("http://localhost:"+o+"/original");e.pipe(n),n.pipe(t)}).listen(u,function(){var e=s("http://localhost:"+u+"/original",function(e,t,n){i.equal(n,"OK"),a.close(),f.close()});e.timeout=1e3})}})