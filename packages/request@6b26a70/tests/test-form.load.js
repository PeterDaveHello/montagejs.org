montageDefine("6b26a70","tests/test-form",{dependencies:["assert","http","path","mime","../index","fs"],factory:function(e,t,n){var r=e("assert"),i=e("http"),s=e("path"),o=e("mime"),u=e("../index"),a=e("fs"),f="http://nodejs.org/images/logo.png",l=[{name:"my_field",value:"my_value"},{name:"my_buffer",value:new Buffer([1,2,3])},{name:"my_file",value:a.createReadStream(__dirname+"/unicycle.jpg")},{name:"remote_file",value:u(f)}],c=i.createServer(function(e,t){var n="";e.setEncoding("utf8"),e.on("data",function(e){n+=e}),e.on("end",function(){var e=l.shift();r.ok(n.indexOf('form-data; name="'+e.name+'"')!=-1),r.ok(n.indexOf(e.value)!=-1);var e=l.shift();r.ok(n.indexOf('form-data; name="'+e.name+'"')!=-1),r.ok(n.indexOf(e.value)!=-1);var e=l.shift();r.ok(n.indexOf('form-data; name="'+e.name+'"')!=-1),r.ok(n.indexOf('; filename="'+s.basename(e.value.path)+'"')!=-1),r.ok(n.indexOf("2005:06:21 01:44:12")!=-1),r.ok(n.indexOf("Content-Type: "+o.lookup(e.value.path))!=-1);var e=l.shift();r.ok(n.indexOf('form-data; name="'+e.name+'"')!=-1),r.ok(n.indexOf('; filename="'+s.basename(e.value.path)+'"')!=-1),r.ok(n.indexOf("ImageReady")!=-1),r.ok(n.indexOf("Content-Type: "+o.lookup(f))!=-1),t.writeHead(200),t.end("done")})});c.listen(8080,function(){var e=u.post("http://localhost:8080/upload",function(){c.close()}),t=e.form();l.forEach(function(e){t.append(e.name,e.value)})}),process.on("exit",function(){r.strictEqual(l.length,0)})}})