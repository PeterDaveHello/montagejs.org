montageDefine("6b26a70","tests/test-onelineproxy",{dependencies:["http","assert","../index"],factory:function(e,t,n){var r=e("http"),i=e("assert"),s=e("../index"),o=r.createServer(function(e,t){t.statusCode=200;if(e.url==="/get"){i.equal(e.method,"GET"),t.write("content"),t.end();return}if(e.url==="/put"){var n="";i.equal(e.method,"PUT"),e.on("data",function(e){n+=e}),e.on("end",function(){i.equal(n,"content"),t.write("success"),t.end()});return}if(e.url==="/proxy")return i.equal(e.method,"PUT"),e.pipe(s("http://localhost:8080/put")).pipe(t);if(e.url==="/test")return s("http://localhost:8080/get").pipe(s.put("http://localhost:8080/proxy")).pipe(t);throw new Error("Unknown url",e.url)}).listen(8080,function(){s("http://localhost:8080/test",function(e,t,n){if(e)throw e;if(t.statusCode!==200)throw new Error("statusCode not 200 "+t.statusCode);i.equal(n,"success"),o.close()})})}})