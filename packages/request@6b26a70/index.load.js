montageDefine("6b26a70","index",{dependencies:["http","url","util","stream","qs","querystring","crypto","oauth-sign","hawk","aws-sign","http-signature","node-uuid","mime","tunnel-agent","json-stringify-safe","forever-agent","form-data","cookie-jar","https","tls"],factory:function(e,t,n){function k(e){return(new Buffer(e||"","ascii")).toString("base64")}function L(e){return c.createHash("md5").update(e).digest("hex")}function A(e){if(e.readable&&e.path&&e.mode)return!0}function O(e){var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function D(e){a.Stream.call(this),this.readable=!0,this.writable=!0,typeof e=="string"&&(e={uri:e});var t=Object.keys(D.prototype);for(var n in e)t.indexOf(n)===-1?this[n]=e[n]:typeof e[n]=="function"&&delete e[n];e.method&&(this.explicitMethod=!0),this.init(e)}function P(e,t){var n,r,i;return Object.keys(t).forEach(function(s){r=new RegExp(e,"i"),i=s.match(r),i&&(n=t[s])}),n}function H(e,t,n){return typeof t=="function"&&!n&&(n=t),t&&typeof t=="object"?t.uri=e:typeof e=="string"?t={uri:e}:(t=e,e=t.uri),{uri:e,options:t,callback:n}}function B(e,t,n){if(typeof e=="undefined")throw new Error("undefined is not a valid uri or options object.");typeof t=="function"&&!n&&(n=t),t&&typeof t=="object"?t.uri=e:typeof e=="string"?t={uri:e}:t=e,t=O(t),n&&(t.callback=n);var r=new D(t);return r}function j(e,t){if(typeof e=="object"||typeof e=="function")var n={};if(Array.isArray(e))var n=[];var r=[];Object.defineProperty(e,t,{});var i=Object.keys(e).filter(function(n){return n===t?!1:typeof e[n]!="object"&&typeof e[n]!="function"||e[n]===null?!0:!Object.getOwnPropertyDescriptor(e[n],t)});for(var s=0;s<i.length;s++)typeof e[i[s]]!="object"&&typeof e[i[s]]!="function"||e[i[s]]===null?n[i[s]]=e[i[s]]:(r.push(i[s]),Object.defineProperty(e[i[s]],t,{}));for(var s=0;s<r.length;s++)n[r[s]]=j(e[r[s]],t);return n}function F(){return j(this,"__"+((1+Math.random())*65536|0).toString(16))}var r=e("http"),i=!1,s=!1,o=e("url"),u=e("util"),a=e("stream"),f=e("qs"),l=e("querystring"),c=e("crypto"),h=e("oauth-sign"),p=e("hawk"),d=e("aws-sign"),v=e("http-signature"),m=e("node-uuid"),g=e("mime"),y=e("tunnel-agent"),b=e("json-stringify-safe"),w=e("forever-agent"),E=e("form-data"),S=e("cookie-jar"),x=S.Jar,T=new x;try{i=e("https")}catch(N){}try{s=e("tls")}catch(N){}var C;/\brequest\b/.test(process.env.NODE_DEBUG)?C=function(){console.error("REQUEST %s",u.format.apply(u,arguments))}:C=function(){},i&&!i.Agent&&(i.Agent=function(e){r.Agent.call(this,e)},u.inherits(i.Agent,r.Agent),i.Agent.prototype._getConnection=function(e,t,n){var r=s.connect(t,e,this.options,function(){n&&n()});return r});var M=/^https?:/,_={};u.inherits(D,a.Stream),D.prototype.init=function(e){var t=this;e||(e={}),t.method||(t.method=e.method||"GET"),t.localAddress=e.localAddress,C(e),!t.pool&&t.pool!==!1&&(t.pool=_),t.dests=t.dests||[],t.__isRequestRequest=!0,!t._callback&&t.callback&&(t._callback=t.callback,t.callback=function(){if(t._callbackCalled)return;t._callbackCalled=!0,t._callback.apply(t,arguments)},t.on("error",t.callback.bind()),t.on("complete",t.callback.bind(t,null))),t.url&&(t.uri=t.url,delete t.url);if(!t.uri)return t.emit("error",new Error("options.uri is a required argument"));typeof t.uri=="string"&&(t.uri=o.parse(t.uri)),t.strictSSL===!1&&(t.rejectUnauthorized=!1);if(t.proxy){typeof t.proxy=="string"&&(t.proxy=o.parse(t.proxy));if(r.globalAgent&&t.uri.protocol==="https:"){var n=t.proxy.protocol==="http:"?y.httpsOverHttp:y.httpsOverHttps,s={proxy:{host:t.proxy.hostname,port:+t.proxy.port,proxyAuth:t.proxy.auth,headers:{Host:t.uri.hostname+":"+(t.uri.port||t.uri.protocol==="https:"?443:80)}},rejectUnauthorized:t.rejectUnauthorized,ca:this.ca};t.agent=n(s),t.tunnel=!0}}if(!t.uri.host||!t.uri.pathname){var u=o.format(t.uri),a='Invalid URI "'+u+'"';Object.keys(e).length===0&&(a+=". This can be caused by a crappy redirection."),t.emit("error",new Error(a));return}t._redirectsFollowed=t._redirectsFollowed||0,t.maxRedirects=t.maxRedirects!==undefined?t.maxRedirects:10,t.followRedirect=t.followRedirect!==undefined?t.followRedirect:!0,t.followAllRedirects=t.followAllRedirects!==undefined?t.followAllRedirects:!1;if(t.followRedirect||t.followAllRedirects)t.redirects=t.redirects||[];t.headers=t.headers?O(t.headers):{},t.setHost=!1,!t.headers.host&&!t.headers.Host&&(t.headers.host=t.uri.hostname,t.uri.port&&(t.uri.port!==80||t.uri.protocol!=="http:")&&(t.uri.port!==443||t.uri.protocol!=="https:")&&(t.headers.host+=":"+t.uri.port),t.setHost=!0),t.jar(t._jar||e.jar),t.uri.pathname||(t.uri.pathname="/"),t.uri.port||(t.uri.protocol=="http:"?t.uri.port=80:t.uri.protocol=="https:"&&(t.uri.port=443)),t.proxy&&!t.tunnel?(t.port=t.proxy.port,t.host=t.proxy.hostname):(t.port=t.uri.port,t.host=t.uri.hostname),t.clientErrorHandler=function(e){if(t._aborted)return;if(t.req&&t.req._reusedSocket&&e.code==="ECONNRESET"&&t.agent.addRequestNoreuse){t.agent={addRequest:t.agent.addRequestNoreuse.bind(t.agent)},t.start(),t.req.end();return}t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null),t.emit("error",e)},t._parserErrorHandler=function(e){this.res?this.res.request?this.res.request.emit("error",e):this.res.emit("error",e):this._httpMessage.emit("error",e)},e.form&&t.form(e.form),e.qs&&t.qs(e.qs),t.uri.path?t.path=t.uri.path:t.path=t.uri.pathname+(t.uri.search||""),t.path.length===0&&(t.path="/"),e.oauth&&t.oauth(e.oauth),e.aws&&t.aws(e.aws),e.hawk&&t.hawk(e.hawk),e.httpSignature&&t.httpSignature(e.httpSignature),e.auth&&t.auth(e.auth.user===""?e.auth.user:e.auth.user||e.auth.username,e.auth.pass||e.auth.password,e.auth.sendImmediately);if(t.uri.auth&&!t.headers.authorization){var f=t.uri.auth.split(":").map(function(e){return l.unescape(e)});t.auth(f[0],f.slice(1).join(":"),!0)}t.proxy&&t.proxy.auth&&!t.headers["proxy-authorization"]&&!t.tunnel&&(t.headers["proxy-authorization"]="Basic "+k(t.proxy.auth.split(":").map(function(e){return l.unescape(e)}).join(":"))),t.proxy&&!t.tunnel&&(t.path=t.uri.protocol+"//"+t.uri.host+t.path),e.json?t.json(e.json):e.multipart&&(t.boundary=m(),t.multipart(e.multipart));if(t.body){var c=0;if(!Buffer.isBuffer(t.body))if(Array.isArray(t.body))for(var h=0;h<t.body.length;h++)c+=t.body[h].length;else t.body=new Buffer(t.body),c=t.body.length;else c=t.body.length;if(!c)throw new Error("Argument error, options.body.");!t.headers["content-length"]&&!t.headers["Content-Length"]&&(t.headers["content-length"]=c)}var p=t.proxy&&!t.tunnel?t.proxy.protocol:t.uri.protocol,d={"http:":r,"https:":i},v=t.httpModules||{};t.httpModule=v[p]||d[p];if(!t.httpModule)return this.emit("error",new Error("Invalid protocol"));e.ca&&(t.ca=e.ca),t.agent||(e.agentOptions&&(t.agentOptions=e.agentOptions),e.agentClass?t.agentClass=e.agentClass:e.forever?t.agentClass=p==="http:"?w:w.SSL:t.agentClass=t.httpModule.Agent),t.pool===!1?t.agent=!1:(t.agent=t.agent||t.getAgent(),t.maxSockets&&(t.agent.maxSockets=t.maxSockets),t.pool.maxSockets&&(t.agent.maxSockets=t.pool.maxSockets)),t.once("pipe",function(e){if(t.ntick&&t._started)throw new Error("You cannot pipe to this stream after the outbound request has started.");t.src=e;if(A(e))!t.headers["content-type"]&&!t.headers["Content-Type"]&&(t.headers["content-type"]=g.lookup(e.path));else{if(e.headers)for(var n in e.headers)t.headers[n]||(t.headers[n]=e.headers[n]);t._json&&!t.headers["content-type"]&&!t.headers["Content-Type"]&&(t.headers["content-type"]="application/json"),e.method&&!t.explicitMethod&&(t.method=e.method)}t.on("pipe",function(){console.error("You have already piped to this stream. Pipeing twice is likely to break the request.")})}),process.nextTick(function(){if(t._aborted)return;t._form&&(t.setHeaders(t._form.getHeaders()),t._form.pipe(t)),t.body?(Array.isArray(t.body)?t.body.forEach(function(e){t.write(e)}):t.write(t.body),t.end()):t.requestBodyStream?(console.warn("options.requestBodyStream is deprecated, please pass the request object to stream.pipe."),t.requestBodyStream.pipe(t)):t.src||(t.method!=="GET"&&typeof t.method!="undefined"&&(t.headers["content-length"]=0),t.end()),t.ntick=!0})},D.prototype._updateProtocol=function(){var e=this,t=e.uri.protocol;if(t==="https:"){if(e.proxy){e.tunnel=!0;var n=e.proxy.protocol==="http:"?y.httpsOverHttp:y.httpsOverHttps,s={proxy:{host:e.proxy.hostname,port:+e.proxy.port,proxyAuth:e.proxy.auth},rejectUnauthorized:e.rejectUnauthorized,ca:e.ca};e.agent=n(s);return}e.httpModule=i;switch(e.agentClass){case w:e.agentClass=w.SSL;break;case r.Agent:e.agentClass=i.Agent;break;default:return}e.agent&&(e.agent=e.getAgent())}else{e.tunnel&&(e.tunnel=!1),e.httpModule=r;switch(e.agentClass){case w.SSL:e.agentClass=w;break;case i.Agent:e.agentClass=r.Agent;break;default:return}e.agent&&(e.agent=null,e.agent=e.getAgent())}},D.prototype.getAgent=function(){var e=this.agentClass,t={};if(this.agentOptions)for(var n in this.agentOptions)t[n]=this.agentOptions[n];this.ca&&(t.ca=this.ca),typeof this.rejectUnauthorized!="undefined"&&(t.rejectUnauthorized=this.rejectUnauthorized),this.cert&&this.key&&(t.key=this.key,t.cert=this.cert);var r="";e!==this.httpModule.Agent&&(r+=e.name),this.httpModule.globalAgent||(t.host=this.host,t.port=this.port,r&&(r+=":"),r+=this.host+":"+this.port);var i=this.proxy;typeof i=="string"&&(i=o.parse(i));var s=i&&i.protocol==="https:"||this.uri.protocol==="https:";return s&&(t.ca&&(r&&(r+=":"),r+=t.ca),typeof t.rejectUnauthorized!="undefined"&&(r&&(r+=":"),r+=t.rejectUnauthorized),t.cert&&(r+=t.cert.toString("ascii")+t.key.toString("ascii"))),!r&&e===this.httpModule.Agent&&this.httpModule.globalAgent?this.httpModule.globalAgent:(r=this.uri.protocol+r,this.pool[r]?this.pool[r]:this.pool[r]=new e(t))},D.prototype.start=function(){var e=this;if(e._aborted)return;e._started=!0,e.method=e.method||"GET",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.headers["content-length"]&&!e.headers["Content-Length"]&&(e.headers["content-length"]=e.src.stat.size),e._aws&&e.aws(e._aws,!0);var t=O(e);delete t.auth,C("make request",e.uri.href),e.req=e.httpModule.request(t,e.onResponse.bind(e)),e.timeout&&!e.timeoutTimer&&(e.timeoutTimer=setTimeout(function(){e.req.abort();var t=new Error("ETIMEDOUT");t.code="ETIMEDOUT",e.emit("error",t)},e.timeout),e.req.setTimeout&&e.req.setTimeout(e.timeout,function(){if(e.req){e.req.abort();var t=new Error("ESOCKETTIMEDOUT");t.code="ESOCKETTIMEDOUT",e.emit("error",t)}})),e.req.on("error",e.clientErrorHandler),e.req.on("drain",function(){e.emit("drain")}),e.on("end",function(){e.req.connection&&e.req.connection.removeListener("error",e._parserErrorHandler)}),e.emit("request",e.req)},D.prototype.onResponse=function(e){var t=this;C("onResponse",t.uri.href,e.statusCode,e.headers),e.on("end",function(){C("response end",t.uri.href,e.statusCode,e.headers)}),e.connection.listeners("error").indexOf(t._parserErrorHandler)===-1&&e.connection.once("error",t._parserErrorHandler);if(t._aborted){C("aborted",t.uri.href),e.resume();return}t._paused?e.pause():e.resume(),t.response=e,e.request=t,e.toJSON=F;if(t.httpModule===i&&t.strictSSL&&!e.client.authorized){C("strict ssl error",t.uri.href);var n=e.client.authorizationError;t.emit("error",new Error("SSL Error: "+n));return}t.setHost&&delete t.headers.host,t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null);var r=function(e){t._jar?t._jar.add(new S(e)):T.add(new S(e))};e.headers["set-cookie"]&&!t._disableCookies&&(Array.isArray(e.headers["set-cookie"])?e.headers["set-cookie"].forEach(r):r(e.headers["set-cookie"]));var s=null;if(e.statusCode>=300&&e.statusCode<400&&e.headers.location){C("redirect",e.headers.location);if(t.followAllRedirects)s=e.headers.location;else if(t.followRedirect)switch(t.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:s=e.headers.location}}else if(e.statusCode==401&&t._hasAuth&&!t._sentAuth){var u=e.headers["www-authenticate"],a=u&&u.split(" ")[0];C("reauth",a);switch(a){case"Basic":t.auth(t._user,t._pass,!0),s=t.uri;break;case"Digest":var f=u.match(/([a-z0-9_-]+)="([^"]+)"/gi),l={};for(var c=0;c<f.length;c++){var h=f[c].indexOf("="),p=f[c].substring(0,h),d=f[c].substring(h+1);l[p]=d.substring(1,d.length-1)}var v=L(t._user+":"+l.realm+":"+t._pass),m=L(t.method+":"+t.uri.path),g=L(v+":"+l.nonce+":1::auth:"+m),y={username:t._user,realm:l.realm,nonce:l.nonce,uri:t.uri.path,qop:l.qop,response:g,nc:1,cnonce:""};u=[];for(var b in y)u.push(b+'="'+y[b]+'"');u="Digest "+u.join(", "),t.setHeader("authorization",u),t._sentAuth=!0,s=t.uri}}if(s){C("redirect to",s),t._paused&&e.resume();if(t._redirectsFollowed>=t.maxRedirects){t.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+t.uri.href));return}t._redirectsFollowed+=1,M.test(s)||(s=o.resolve(t.uri.href,s));var w=t.uri;t.uri=o.parse(s),t.uri.protocol!==w.protocol&&t._updateProtocol(),t.redirects.push({statusCode:e.statusCode,redirectUri:s}),t.followAllRedirects&&e.statusCode!=401&&(t.method="GET"),delete t.src,delete t.req,delete t.agent,delete t._started,e.statusCode!=401&&(delete t.body,delete t._form,t.headers&&(delete t.headers.host,delete t.headers["content-type"],delete t.headers["content-length"])),t.emit("redirect"),t.init();return}t._redirectsFollowed=t._redirectsFollowed||0,e.on("close",function(){t._ended||t.response.emit("end")}),t.encoding&&(t.dests.length!==0?console.error("Ingoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid."):e.setEncoding(t.encoding)),t.emit("response",e),t.dests.forEach(function(e){t.pipeDest(e)}),e.on("data",function(e){t._destdata=!0,t.emit("data",e)}),e.on("end",function(e){t._ended=!0,t.emit("end",e)}),e.on("close",function(){t.emit("close")});if(t.callback){var E=[],x=0;t.on("data",function(e){E.push(e),x+=e.length}),t.on("end",function(){C("end event",t.uri.href);if(t._aborted){C("aborted",t.uri.href);return}if(E.length&&Buffer.isBuffer(E[0])){C("has body",t.uri.href,x);var n=new Buffer(x),r=0;E.forEach(function(e){e.copy(n,r,0,e.length),r+=e.length}),t.encoding===null?e.body=n:e.body=n.toString(t.encoding)}else E.length&&(t.encoding==="utf8"&&E[0].length>0&&E[0][0]==="﻿"&&(E[0]=E[0].substring(1)),e.body=E.join(""));if(t._json)try{e.body=JSON.parse(e.body)}catch(i){}C("emitting complete",t.uri.href),e.body==undefined&&!t._json&&(e.body=""),t.emit("complete",e,e.body)})}C("finish init function",t.uri.href)},D.prototype.abort=function(){this._aborted=!0,this.req?this.req.abort():this.response&&this.response.abort(),this.emit("abort")},D.prototype.pipeDest=function(e){var t=this.response;e.headers&&(e.headers["content-type"]=t.headers["content-type"],t.headers["content-length"]&&(e.headers["content-length"]=t.headers["content-length"]));if(e.setHeader){for(var n in t.headers)e.setHeader(n,t.headers[n]);e.statusCode=t.statusCode}this.pipefilter&&this.pipefilter(t,e)},D.prototype.setHeader=function(e,t,n){return n===undefined&&(n=!0),n||!this.headers.hasOwnProperty(e)?this.headers[e]=t:this.headers[e]+=","+t,this},D.prototype.setHeaders=function(e){for(var t in e)this.setHeader(t,e[t]);return this},D.prototype.qs=function(e,t){var n;!t&&this.uri.query?n=f.parse(this.uri.query):n={};for(var r in e)n[r]=e[r];return f.stringify(n)===""?this:(this.uri=o.parse(this.uri.href.split("?")[0]+"?"+f.stringify(n)),this.url=this.uri,this.path=this.uri.path,this)},D.prototype.form=function(e){return e?(this.headers["content-type"]="application/x-www-form-urlencoded; charset=utf-8",this.body=f.stringify(e).toString("utf8"),this):(this._form=new E,this._form)},D.prototype.multipart=function(e){var t=this;t.body=[],t.headers["content-type"]?t.headers["content-type"]=t.headers["content-type"].split(";")[0]+"; boundary="+t.boundary:t.headers["content-type"]="multipart/related; boundary="+t.boundary;if(!e.forEach)throw new Error("Argument error, options.multipart.");return t.preambleCRLF&&t.body.push(new Buffer("\r\n")),e.forEach(function(e){var n=e.body;if(n==null)throw Error("Body attribute missing in multipart.");delete e.body;var r="--"+t.boundary+"\r\n";Object.keys(e).forEach(function(t){r+=t+": "+e[t]+"\r\n"}),r+="\r\n",t.body.push(new Buffer(r)),t.body.push(new Buffer(n)),t.body.push(new Buffer("\r\n"))}),t.body.push(new Buffer("--"+t.boundary+"--")),t},D.prototype.json=function(e){var t=this,n=function(){!t.headers.accept&&!t.headers.Accept&&t.setHeader("accept","application/json")};return n(),this._json=!0,typeof e=="boolean"?typeof this.body=="object"&&(n(),this.body=b(this.body),t.setHeader("content-type","application/json")):(n(),this.body=b(e),t.setHeader("content-type","application/json")),this},D.prototype.auth=function(e,t,n){if(typeof e!="string"||t!==undefined&&typeof t!="string")throw new Error("auth() received invalid user or password");this._user=e,this._pass=t,this._hasAuth=!0;if(n||typeof n=="undefined")this.setHeader("authorization","Basic "+k(e+":"+t)),this._sentAuth=!0;return this},D.prototype.aws=function(e,t){if(!t)return this._aws=e,this;var n=new Date;this.setHeader("date",n.toUTCString());var r={key:e.key,secret:e.secret,verb:this.method.toUpperCase(),date:n,contentType:P("content-type",this.headers)||"",md5:P("content-md5",this.headers)||"",amazonHeaders:d.canonicalizeHeaders(this.headers)};return e.bucket&&this.path?r.resource="/"+e.bucket+this.path:e.bucket&&!this.path?r.resource="/"+e.bucket:!e.bucket&&this.path?r.resource=this.path:!e.bucket&&!this.path&&(r.resource="/"),r.resource=d.canonicalizeResource(r.resource),this.setHeader("authorization",d.authorization(r)),this},D.prototype.httpSignature=function(e){var t=this;return v.signRequest({getHeader:function(e){return P(e,t.headers)},setHeader:function(e,n){t.setHeader(e,n)},method:this.method,path:this.path},e),C("httpSignature authorization",P("authorization",this.headers)),this},D.prototype.hawk=function(e){this.headers.Authorization=p.client.header(this.uri,this.method,e).field},D.prototype.oauth=function(e){var t;this.headers["content-type"]&&this.headers["content-type"].slice(0,"application/x-www-form-urlencoded".length)==="application/x-www-form-urlencoded"&&(t=f.parse(this.body)),this.uri.query&&(t=f.parse(this.uri.query)),t||(t={});var n={};for(var r in t)n[r]=t[r];for(var r in e)n["oauth_"+r]=e[r];n.oauth_version||(n.oauth_version="1.0"),n.oauth_timestamp||(n.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),n.oauth_nonce||(n.oauth_nonce=m().replace(/-/g,"")),n.oauth_signature_method="HMAC-SHA1";var i=n.oauth_consumer_secret;delete n.oauth_consumer_secret;var s=n.oauth_token_secret;delete n.oauth_token_secret;var o=n.oauth_timestamp,u=this.uri.protocol+"//"+this.uri.host+this.uri.pathname,a=h.hmacsign(this.method,u,n,i,s);for(var r in t)r.slice(0,"oauth_")in e||(delete n["oauth_"+r],r!=="x_auth_mode"&&delete n[r]);return n.oauth_timestamp=o,this.headers.Authorization="OAuth "+Object.keys(n).sort().map(function(e){return e+'="'+h.rfc3986(n[e])+'"'}).join(","),this.headers.Authorization+=',oauth_signature="'+h.rfc3986(a)+'"',this},D.prototype.jar=function(e){var t;this._redirectsFollowed===0&&(this.originalCookieHeader=this.headers.cookie),e===!1?(t=!1,this._disableCookies=!0):e?t=e.get({url:this.uri.href}):t=T.get({url:this.uri.href});if(t&&t.length){var n=t.map(function(e){return e.name+"="+e.value}).join("; ");this.originalCookieHeader?this.headers.cookie=this.originalCookieHeader+"; "+n:this.headers.cookie=n}return this._jar=e,this},D.prototype.pipe=function(e,t){if(this.response){if(this._destdata)throw new Error("You cannot pipe after data has been emitted from the response.");if(this._ended)throw new Error("You cannot pipe after the response has been ended.");return a.Stream.prototype.pipe.call(this,e,t),this.pipeDest(e),e}return this.dests.push(e),a.Stream.prototype.pipe.call(this,e,t),e},D.prototype.write=function(){return this._started||this.start(),this.req.write.apply(this.req,arguments)},D.prototype.end=function(e){e&&this.write(e),this._started||this.start(),this.req.end()},D.prototype.pause=function(){this.response?this.response.pause.apply(this.response,arguments):this._paused=!0},D.prototype.resume=function(){this.response?this.response.resume.apply(this.response,arguments):this._paused=!1},D.prototype.destroy=function(){this._ended?this.response&&this.response.destroy():this.end()},n.exports=B,B.debug=process.env.NODE_DEBUG&&/request/.test(process.env.NODE_DEBUG),B.initParams=H,B.defaults=function(e,t){var n=function(n){var r=function(r,i,s){var o=H(r,i,s);for(var u in e)o.options[u]===undefined&&(o.options[u]=e[u]);return typeof t=="function"&&(n===B?n=t:o.options._requester=t),n(o.options,o.callback)};return r},r=n(B);return r.get=n(B.get),r.patch=n(B.patch),r.post=n(B.post),r.put=n(B.put),r.head=n(B.head),r.del=n(B.del),r.cookie=n(B.cookie),r.jar=B.jar,r},B.forever=function(e,t){var n={};if(t)for(option in t)n[option]=t[option];return e&&(n.agentOptions=e),n.forever=!0,B.defaults(n)},B.get=B,B.post=function(e,t,n){var r=H(e,t,n);return r.options.method="POST",B(r.uri||null,r.options,r.callback)},B.put=function(e,t,n){var r=H(e,t,n);return r.options.method="PUT",B(r.uri||null,r.options,r.callback)},B.patch=function(e,t,n){var r=H(e,t,n);return r.options.method="PATCH",B(r.uri||null,r.options,r.callback)},B.head=function(e,t,n){var r=H(e,t,n);r.options.method="HEAD";if(r.options.body||r.options.requestBodyStream||r.options.json&&typeof r.options.json!="boolean"||r.options.multipart)throw new Error("HTTP HEAD requests MUST NOT include a request body.");return B(r.uri||null,r.options,r.callback)},B.del=function(e,t,n){var r=H(e,t,n);return r.options.method="DELETE",typeof r.options._requester=="function"&&(B=r.options._requester),B(r.uri||null,r.options,r.callback)},B.jar=function(){return new x},B.cookie=function(e){e&&e.uri&&(e=e.uri);if(typeof e!="string")throw new Error("The cookie function only accepts STRING as param");return new S(e)},D.prototype.toJSON=F}})