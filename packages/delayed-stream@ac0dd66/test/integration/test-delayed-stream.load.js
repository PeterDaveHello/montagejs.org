montageDefine("ac0dd66","test/integration/test-delayed-stream",{dependencies:["../common","stream"],factory:function(e,t,n){var r=e("../common"),i=r.assert,s=r.fake.create(),o=r.DelayedStream,u=e("stream").Stream;(function(){var t=new u,n=o.create(t,{pauseStream:!1});s.expect(n,"emit",0);var r=[];t.on("foo",function(e){r.push(e)}),t.emit("foo",1),t.emit("foo",2),i.deepEqual(r,[1,2]),s.verify(),s.stub(n,"emit").times(Infinity).withArg(1,"newListener"),s.expect(n,"emit",["foo",1]),s.expect(n,"emit",["foo",2]),s.expect(t,"resume"),n.resume(),s.verify(),s.expect(t,"resume"),n.resume(),s.verify(),s.expect(n,"emit",["foo",3]),t.emit("foo",3),s.verify()})()}})