var CSSOM={};CSSOM.parse=function(t){var n=0,r="before-selector",i,s="",o={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0},u=new CSSOM.CSSStyleSheet,a=u,f,l,c,h,p="",d,v,m,g,y,b,w=/@(-(?:\w+-)+)?keyframes/g,E=function(e){var r=t.substring(0,n).split("\n"),i=r.length,s=r.pop().length+1,o=new Error(e+" (line "+i+", char "+s+")");throw o.line=i,o.char=s,o.styleSheet=u,o};for(var S;S=t.charAt(n);n++)switch(S){case" ":case"	":case"\r":case"\n":case"\f":o[r]&&(s+=S);break;case'"':i=t.indexOf('"',n+1)+1,i||E('Unmatched "'),s+=t.slice(n,i),n=i-1;switch(r){case"before-value":r="value";break;case"importRule-begin":r="importRule"}break;case"'":i=t.indexOf("'",n+1)+1,i||E("Unmatched '"),s+=t.slice(n,i),n=i-1;switch(r){case"before-value":r="value";break;case"importRule-begin":r="importRule"}break;case"/":t.charAt(n+1)==="*"?(n+=2,i=t.indexOf("*/",n),i===-1?E("Missing */"):n=i+1):s+=S,r==="importRule-begin"&&(s+=" ",r="importRule");break;case"@":if(t.indexOf("@media",n)===n){r="atBlock",v=new CSSOM.CSSMediaRule,v.__starts=n,n+="media".length,s="";break}if(t.indexOf("@import",n)===n){r="importRule-begin",n+="import".length,s+="@import";break}if(t.indexOf("@font-face",n)===n){r="fontFaceRule-begin",n+="font-face".length,g=new CSSOM.CSSFontFaceRule,g.__starts=n,s="";break}w.lastIndex=n;var x=w.exec(t);if(x&&x.index===n){r="keyframesRule-begin",y=new CSSOM.CSSKeyframesRule,y.__starts=n,y._vendorPrefix=x[1],n+=x[0].length-1,s="";break}r=="selector"&&(r="atRule"),s+=S;break;case"{":r==="selector"||r==="atRule"?(d.selectorText=s.trim(),d.style.__starts=n,s="",r="before-name"):r==="atBlock"?(v.media.mediaText=s.trim(),a=f=v,v.parentStyleSheet=u,s="",r="before-selector"):r==="fontFaceRule-begin"?(f&&(g.parentRule=f),g.parentStyleSheet=u,d=g,s="",r="before-name"):r==="keyframesRule-begin"?(y.name=s.trim(),f&&(y.parentRule=f),y.parentStyleSheet=u,a=f=y,s="",r="keyframeRule-begin"):r==="keyframeRule-begin"&&(d=new CSSOM.CSSKeyframeRule,d.keyText=s.trim(),d.__starts=n,s="",r="before-name");break;case":":r==="name"?(c=s.trim(),s="",r="before-value"):s+=S;break;case"(":r==="value"?(i=t.indexOf(")",n+1),i===-1&&E('Unmatched "("'),s+=t.slice(n,i+1),n=i):s+=S;break;case"!":r==="value"&&t.indexOf("!important",n)===n?(p="important",n+="important".length):s+=S;break;case";":switch(r){case"value":d.style.setProperty(c,s.trim(),p),p="",s="",r="before-name";break;case"atRule":s="",r="before-selector";break;case"importRule":m=new CSSOM.CSSImportRule,m.parentStyleSheet=m.styleSheet.parentStyleSheet=u,m.cssText=s+S,u.cssRules.push(m),s="",r="before-selector";break;default:s+=S}break;case"}":switch(r){case"value":d.style.setProperty(c,s.trim(),p),p="";case"before-name":case"name":d.__ends=n+1,f&&(d.parentRule=f),d.parentStyleSheet=u,a.cssRules.push(d),s="",a.constructor===CSSOM.CSSKeyframesRule?r="keyframeRule-begin":r="before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":f||E("Unexpected }"),a.__ends=n+1,u.cssRules.push(a),a=u,f=null,s="",r="before-selector"}break;default:switch(r){case"before-selector":r="selector",d=new CSSOM.CSSStyleRule,d.__starts=n;break;case"before-name":r="name";break;case"before-value":r="value";break;case"importRule-begin":r="importRule"}s+=S}return u},exports.parse=CSSOM.parse,CSSOM.CSSStyleSheet=require("./CSSStyleSheet").CSSStyleSheet,CSSOM.CSSStyleRule=require("./CSSStyleRule").CSSStyleRule,CSSOM.CSSImportRule=require("./CSSImportRule").CSSImportRule,CSSOM.CSSMediaRule=require("./CSSMediaRule").CSSMediaRule,CSSOM.CSSFontFaceRule=require("./CSSFontFaceRule").CSSFontFaceRule,CSSOM.CSSStyleDeclaration=require("./CSSStyleDeclaration").CSSStyleDeclaration,CSSOM.CSSKeyframeRule=require("./CSSKeyframeRule").CSSKeyframeRule,CSSOM.CSSKeyframesRule=require("./CSSKeyframesRule").CSSKeyframesRule