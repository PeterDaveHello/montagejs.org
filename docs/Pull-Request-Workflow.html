<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />

    <title>Pull Request Workflow - Montage Docs</title>

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" />
    <link rel="stylesheet" href="../stylesheets/normalize.css" />
    <link rel="stylesheet" href="../stylesheets/base.css" />
    <link rel="stylesheet" href="../stylesheets/pages.css" />
    <link rel="stylesheet" href="../stylesheets/solarized.css" />

    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>
<body class="docs">

    <header class="header header-pages pushed">
        <div class="header-container">
            <a href="/"><img class="logo" src="../images/logo-pages.png" alt="Montage" /></a>
            <nav class="nav">
                <a class="nav-item" href="/apps">Apps</a>
                <a class="nav-item active" href="/docs">Docs</a>
                <a class="nav-item" href="/apis">APIs</a>
            </nav>
        </div>
    </header>

    <section id="docs">
        <article>
            <div class="markdown-body">

<p>The idea is that the way you add code to montage is by creating a branch in your GitHub fork and asking for it to be merged into master, this is a pull request.</p>

<h2>Keeping in sync<a class="anchor" id="Keeping-in-sync" href="#Keeping-in-sync"></a>
</h2>

<p>Assuming your local repository/directory has two remotes</p>

<ul>
<li>
<strong>montage</strong> Montage main repo on GitHub</li>
<li>
<strong>personal</strong> Your fork repo on GitHub
With the pull request workflow, there are now 3 masters to keep in sync, montage/master, personal/master, and master - Montage’s master, your fork’s master and the local one.</li>
</ul><p>Without having master checked out run the following command.</p>

<p><code>
git fetch montage &amp;&amp; git branch -f master montage/master &amp;&amp; git     fetch personal &amp;&amp; git push personal montage/master:master
</code>
<strong>git fetch montage</strong> Gets all the new commits from the main montage remote.
<strong>git branch -f master montage/master</strong> Move your local master branch’s ref so that is pointing to    the same ref as montage/master is.
<strong>git fetch personal</strong> Gets all the new commits from your personal fork’s remote.
<strong>git push personal montage/master:master</strong> Pushing the commits that we learnt about from montage into your personal fork.
What is this git push command with 2 parameters? It is simply a more explicit syntax:
<code>
git push REMOTE_NAME LOCAL_BRANCH_NAME:BRANCH_NAME_ON_REMOTE
</code></p>

<h2>Doing some work<a class="anchor" id="Doing-some-work" href="#Doing-some-work"></a>
</h2>

<p>Create a feature/work branch for every new thing you want to add or modify. A single development branch should represent changes related to a single issue. It is a lot easier if you never commit anything to master directly. The important part to remember is that any ancestors of montage/master are not going to change therefore it is safe (stable) to branch from them. If you branch from a commit that isn’t yet in the main montage repository you run the risk of having that commit not be integrated as is. You would then have to do a rebase or cherry-pick of your changes so that they can be integrated themselves.</p>

<p>btw: If you want to refer to an Issue in your commit message use gh-## where ## is the issue number.</p>

<h2>Branching<a class="anchor" id="Branching" href="#Branching"></a>
</h2>

<p>So at this point if you want to do some new work, create a branch off master and check it out.
<code>git checkout -b SOMETHING_DESCRIPTIVE</code>
Once you have done some work and have one or more commits on your branch, you want to push the changes to your fork so that you have backup and maybe you can share your changes with someone else.
<strong>REVIEW BEFORE YOU PUSH</strong>, you should at least run the automated tests.
<code>git push personal SOMETHING_DESCRIPTIVE:SOMETHING_DESCRIPTIVE</code>
Rinse and repeat. While you are doing this work, many days may have gone by or you might have noticed some changes on master that might create conflicts with your changes. At that point it is a good idea to do a merge of the master branch into your own work branch. see Merging</p>

<p>Do not repeatedly merge master into your branch, instead simply rollback your previous merge:
    <strong>WARNING</strong>, this will delete all your local changes so stash them before you do this.
<code>git reset --hard HEAD^1</code>
Then you can merge master again. see Merging</p>

<h2>Merging<a class="anchor" id="Merging" href="#Merging"></a>
</h2>

<p>At this point it is important not to have any local changes or untracked files.
<code>git merge --no-commit master</code></p>

<p>What you are doing here is staging a merge commit, if there are any conflicts to resolve the console will indicate this. The merge is intentionally split into two steps to reduce the variability of the process. Once the conflicts are resolved, you will need to stage the resolved conflicts.
<code>git add PATH_TO_FILE</code></p>

<p>If there are no conflicts you have nothing to add and you will need to commit the merge:
<code>git commit -m "Merge branch master"</code></p>

<p>Merge commits should follow the naming conventions: Merge Commit Messages</p>

<h2>The pull request<a class="anchor" id="The-pull-request" href="#The-pull-request"></a>
</h2>

<p>When you are happy with what you have in your fork’s branch, you can go to GitHub, navigate to your branch and send a pull request.
If you want to change some things within the content of the pull request, because you found a bug or because someone left a comment, you can simply push to that branch again and the pull request will get the new changes automatically. The rule there would be don’t add anything without adding a comment yourself or if it isn’t a response to a comment from somebody. Once the pull request is closed, don’t use that branch again.</p>

                </div>
        </article>
    </section>

    <section id="next" class="next">
        <article>
            <h3 class="title">More help?</h3>
            <div class="cols">
                <div class="col col-1-2">
                    <p>Can't find what you are looking for? Get in touch, we're more than happy in helping answer your questions.
                    </p>
                </div>
                <aside class="col col-1-2">
                    <p><strong>Have feedback or ideas?</strong> Let us know by creating a new <a href="https://github.com/montagejs/montage/issues" target="_blank">issue</a>, join us in <a href="http://webchat.freenode.net/?channels=montage" target="_blank">IRC</a> or post questions to our <a href="https://groups.google.com/forum/?fromgroups#!forum/montagejs" target="_blank">Google Group</a>. We're also on <a href="https://twitter.com/montage_js" target="_blank">Twitter</a> and <a href="https://plus.google.com/116915300739108010954/" target="_blank">Google+</a>.
                    </p>
                </aside>
            </div>
        </article>
    </section>


    <section id="social" class="social">
        <article>

            <div class="button-group github">
                <iframe src="http://ghbtns.com/github-btn.html?user=montagejs&amp;repo=montage&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=montagejs&amp;repo=montage&amp;type=fork&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>
            </div>


            <div class="button-group twitter">
                <a href="https://twitter.com/share" class="twitter-share-button" data-via="montage_js" data-count="none">Tweet</a>
                <script>!function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs")</script>
                <a href="https://twitter.com/montage_js" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @montage_js</a>
                <script>!function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs")</script>
            </div>

            <div class="button-group g-plus">
                
                <script src="https://apis.google.com/js/plusone.js">"explicit"</script>
                
                <div class="g-plusone" data-size="medium" data-annotation="inline" data-width="200"></div>
                
                <script>gapi.plusone.go()</script>
            </div>

        </article>
    </section>


    <footer class="footer">
        2013 montagejs.org - <a href="https://github.com/montagejs/montagejs.org">Contributions</a> to this page are welcomed.
    </footer>


    
    <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-35717912-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>

</body>
</html>