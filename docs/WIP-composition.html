<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    
    <title>WIP composition - Montage Docs</title>
    
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,700" />
    <link rel="stylesheet" href="../stylesheets/normalize.css" />
    <link rel="stylesheet" href="../stylesheets/base.css" />
    <link rel="stylesheet" href="../stylesheets/pages.css" />
    <link rel="stylesheet" href="../stylesheets/solarized.css" />
        
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->    
</head>
<body class="docs">
  
    <header class="header header-pages pushed">
        <div class="header-container">
            <a href="/"><img class="logo" src="../images/logo-pages.png" alt="Montage" /></a>
            <nav class="nav">
                <a class="nav-item" href="/apps">Apps</a>
                <a class="nav-item active" href="/docs">Docs</a>
            </nav>
        </div>
    </header>
    
    <section id="docs">
        <article>
            <div class="markdown-body">

<h1>Component composition using Montage.<a class="anchor" id="Component-composition-using-Montage." href="#Component-composition-using-Montage."></a>
</h1>

<p>The way to create and compose the ui for your application using montage is primarily by expressing this in the markup of your templates.</p>

<h2>The Repetition<a class="anchor" id="The-Repetition" href="#The-Repetition"></a>
</h2>

<p></p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"repetition"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/repetition.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"repetition"</span><span class="p">},</span>
            <span class="s2">"content"</span><span class="o">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="s2">"text"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/dynamic-text.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"text"</span><span class="p">},</span>
            <span class="s2">"value"</span><span class="o">:</span> <span class="s2">"hello"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">data-montage-id=</span><span class="s">"repetition"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>
Via the markup we are passing a parameter to the Repetition (the li element) and this will tell the repetition to repeat the li and its associated DynamicText as many times as there are values in the content array. In this case three times.

<h2>Similarly the Condition<a class="anchor" id="Similarly-the-Condition" href="#Similarly-the-Condition"></a>
</h2>

<p></p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"condition"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/condition.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"condition"</span><span class="p">},</span>
            <span class="s2">"condition"</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="s2">"text"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/dynamic-text.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"text"</span><span class="p">},</span>
            <span class="s2">"value"</span><span class="o">:</span> <span class="s2">"This is the truth"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"condition"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>
The span is a parameter to the Condition that tells it to show that element when the condition property is true. In this casse the condition will make sure the span is not visible on the screen.

<h2>Implementing a custom component using the same pattern.<a class="anchor" id="Implementing-a-custom-component-using-the-same-pattern." href="#Implementing-a-custom-component-using-the-same-pattern."></a>
</h2>

<p>Given the desired usage for CustomComponent.
</p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"customComponent"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"my/custom-component.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"customComponent"</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="s2">"text"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/dynamic-text.reel"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"text"</span><span class="p">},</span>
            <span class="s2">"value"</span><span class="o">:</span> <span class="s2">"I'm included."</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"customComponent"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-montage-id=</span><span class="s">"text"</span><span class="nt">&gt;&lt;/span&gt;</span>         <span class="err">&lt;</span>- innerTemplate
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>
The CustomComponent can make use of a <em>template argument</em> to include all the contents of it's <em>innerTemplate</em>. A template argument is an element that has the attribute data-arg. This marks the element as a placeholder that will replaced by the innerTemplate.

<p><strong>my/custom-component.reel/custom-component.html</strong>
</p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"owner"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"my/custom-component.reel"</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"my-CustomComponent--prettyFrame"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">data-arg=</span><span class="s">"*"</span><span class="nt">&gt;&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>

<h2>The Substitution<a class="anchor" id="The-Substitution" href="#The-Substitution"></a>
</h2>

<p>The Substitution component allows you to branch the component tree based on a key in your data</p>

<p></p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"customerNameSubstitution"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/substitution.reel"</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"customerNameSubstitution"</span><span class="p">},</span>
            <span class="s2">"switchComponents"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"read"</span> <span class="o">:</span> <span class="s2">"montage/ui/dynamic-text.reel"</span>
                <span class="s2">"edit"</span> <span class="o">:</span> <span class="s2">"montage/ui/input-text.reel"</span>
            <span class="p">}</span>
            <span class="s2">"switchValue"</span><span class="o">:</span> <span class="s2">"read"</span>
        <span class="p">},</span>
        <span class="s2">"bindings"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"value"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"&lt;-"</span><span class="o">:</span> <span class="s2">"@customer.name"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    Customer name: <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"customerNameSubstitution"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>

<h2>The Exposition<a class="anchor" id="The-Exposition" href="#The-Exposition"></a>
</h2>

<p>The Exposition component allows you to specify components that might or might not be related but need to occupy the same space in the dom.</p>

<p></p><div class="highlight"><pre>...
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/montage-serialization"</span><span class="nt">&gt;</span><span class="p">{</span>
    <span class="s2">"preferences"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"prototype"</span><span class="o">:</span> <span class="s2">"montage/ui/exposition.reel"</span>
        <span class="s2">"properties"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"element"</span><span class="o">:</span> <span class="p">{</span><span class="s2">"#"</span><span class="o">:</span> <span class="s2">"preferences"</span><span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"bindings"</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">"value"</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">"&lt;-"</span><span class="o">:</span> <span class="s2">"@customer.name"</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"displayPanel"</span><span class="o">:</span> <span class="p">{...},</span>
    <span class="s2">"networkPanel"</span><span class="o">:</span> <span class="p">{...},</span>
    <span class="s2">"usersPanel"</span><span class="o">:</span> <span class="p">{...}</span>
<span class="p">}</span><span class="nt">&lt;/script&gt;</span>
...
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">data-montage-id=</span><span class="s">"preferences"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"display"</span>  <span class="na">data-montage-id=</span><span class="s">"displayPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"network"</span>  <span class="na">data-montage-id=</span><span class="s">"networkPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">data-param=</span><span class="s">"users"</span>  <span class="na">data-montage-id=</span><span class="s">"usersPanel"</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
...
</pre></div>

                </div>
        </article>
    </section>

    <section id="next" class="next">
        <article>
            <h3 class="title">More help?</h3>
            <div class="cols">
                <div class="col col-1-2">
                    <p>Can't find what you are looking for? Get in touch, we're more than happy in helping answer your questions.
                    </p>
                </div>
                <aside class="col col-1-2">
                    <p><strong>Have feedback or ideas?</strong> Let us know by creating a new <a href="https://github.com/montagejs/montage/issues" target="_blank">issue</a>, join us in <a href="http://webchat.freenode.net/?channels=montage" target="_blank">IRC</a> or post questions to our <a href="https://groups.google.com/forum/?fromgroups#!forum/montagejs" target="_blank">Google Group</a>. We're also on <a href="https://twitter.com/montage_js" target="_blank">Twitter</a> and <a href="https://plus.google.com/116915300739108010954/" target="_blank">Google+</a>.
                    </p>
                </aside>
            </div>
        </article>
    </section>

    
    <section id="social" class="social">
        <article>
            
            <div class="button-group github">
                <iframe src="http://ghbtns.com/github-btn.html?user=montagejs&amp;repo=montage&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>
                <iframe src="http://ghbtns.com/github-btn.html?user=montagejs&amp;repo=montage&amp;type=fork&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="90px" height="20px"></iframe>
            </div>
            
            
            <div class="button-group twitter">
                <a href="https://twitter.com/share" class="twitter-share-button" data-via="montage_js" data-count="none">Tweet</a>
                <script>!function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs")</script>
                <a href="https://twitter.com/montage_js" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @montage_js</a>
                <script>!function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs")</script>
            </div>
            
            <div class="button-group g-plus">
                
                <script src="https://apis.google.com/js/plusone.js">"explicit"</script>
                
                <div class="g-plusone" data-size="medium" data-annotation="inline" data-width="200"></div>
                
                <script>gapi.plusone.go()</script>
            </div>
            
        </article>
    </section>
        
    
    <footer class="footer">
        2012 montagejs.org - <a href="https://github.com/montagejs/montagejs.org">Contributions</a> to this page are welcomed.
    </footer>
        
    
    
    <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-35717912-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
    
</body>
</html>